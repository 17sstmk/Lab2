<!DOCTYPE html>
<html lang="en">
<head>
    <title>lab</title>
<style>
 .dlgReply 
{ 
/*display: table-cell; 
text-align: center;*/ 
vertical-align: middle; 
} 
table 
{ 
margin-left: auto; 
margin-right: auto; 
padding: 0 0.5em;
} 
th{
background-color:grey;
color:whitesmoke;
}
</style>





<script>
var sl2=1;
var row;
var hasdone=0;
var times=0;
var biaoge=0;
var dangqianbiaoge;
var alltable = new Array()
function help(){
var div3=document.getElementById("div3");
alert(div3.innerHTML);

}
function show(index) {
if (index == 1) {
var div1=document.getElementById("div1");
div1.innerHTML="";
var div2=document.getElementById("div2");
div2.innerHTML="";
}
if (index == 2) {
var div1=document.getElementById("div1");
div1.innerHTML="";
var div2=document.getElementById("div2");
div2.innerHTML="";
var input = document.createElement("input");
input.setAttribute("type", "text");
input.setAttribute("placeholder","Table Name");
input.setAttribute("id","name");
var input2 = document.createElement("input");
input2.setAttribute("type", "text");
input2.setAttribute("placeholder","Columns Numbers");
input2.setAttribute("id","number");
input2.setAttribute("onblur","show2()");
document.getElementById("div1").appendChild(input);
document.getElementById("div1").appendChild(input2);
document.getElementById("div1").appendChild(document.createElement("br"))
}
if (index == 3) {
  var div1=document.getElementById("div1");
div1.innerHTML="";
   var div2=document.getElementById("div2");
div2.innerHTML="";
if(hasdone==1){
  for( var i=0;i<row;i++){
  var input = document.createElement("input");
 input.setAttribute("type", "text");
 input.setAttribute("placeholder","Attribute");
 input.setAttribute("id","add"+i);
 document.getElementById("div2").appendChild(input);
 }
  document.getElementById("div2").appendChild(document.createElement("br"))
var input = document.createElement("button");
input.innerHTML="Commit";
input.setAttribute("onclick", "addrow()");
document.getElementById("div2").appendChild(input);
}


}
if (index == 4) {
 var div1=document.getElementById("div1");
div1.innerHTML="";
   var div2=document.getElementById("div2");
div2.innerHTML="";
if(hasdone==1){
  for( var i=0;i<row;i++){
  var input = document.createElement("input");
 input.setAttribute("type", "text");
 input.setAttribute("placeholder","Attribute");
 input.setAttribute("id","delete"+i);
 document.getElementById("div2").appendChild(input);
 }
  document.getElementById("div2").appendChild(document.createElement("br"))
var input = document.createElement("button");
input.innerHTML="Commit";
input.setAttribute("onclick", "deleterow()");
document.getElementById("div2").appendChild(input);
}

}
if (index == 5) {
alert("Warning You can't undo this action!");
  var div1=document.getElementById("div1");
div1.innerHTML="";
        var div2=document.getElementById("div2");
div2.innerHTML="";
var input = document.createElement("button");
input.innerHTML="Commit";
input.setAttribute("onclick", "deletetable()");
document.getElementById("div2").appendChild(input);





}

}


function nowtable(index){
   var div3=document.getElementById("div3");
if(index==999){
div3.innerHTML="";
}
else{
div3.innerHTML=alltable[index];
dangqianbiaoge=index;


}





}









function show2(){
   var div2=document.getElementById("div2");
div2.innerHTML="";
var x=document.getElementById("number").value;
if(x>0){
  for( var i=0;i<x;i++){
  var input = document.createElement("input");
 input.setAttribute("type", "text");
 input.setAttribute("placeholder","Attribute");
 input.setAttribute("id","title"+i);
 document.getElementById("div2").appendChild(input);
 }
document.getElementById("div2").appendChild(document.createElement("br"))
var input = document.createElement("button");
input.innerHTML="Commit";
input.setAttribute("onclick", "tableshow()");
document.getElementById("div2").appendChild(input);
}

}

function tableshow(){
   var sel = document.getElementById("select2");
   var b = document.getElementById("name").value;
   var c = document.getElementById("number").value;
   var div3=document.getElementById("div3");
   times=0;
   row=c;
   hasdone=1;
   var option = new Option(b, biaoge);   
   div3.innerHTML="";   
    sel.options.add(option); 
    document.getElementById('select2').value=biaoge;
    var tab="<table id='asdf' border='0'>"; 
      for(var i=1;i<=1;i++)
        {
            tab+="<tr>";
            for(var j=0;j<c;j++)
            {
                 var d=document.getElementById("title"+j).value
                tab+="<th>"+d+"</th>";
            }
            tab+="</tr>";
        }
     tab+="</table>"
         div3.innerHTML=tab;    
 document.getElementById('asdf').id='myTable'+biaoge;
   alltable[biaoge]=tab;
   dangqianbiaoge=biaoge;
   biaoge=biaoge+1;

}

function addrow(){
  var x=document.getElementById('myTable'+dangqianbiaoge).insertRow(times+1);
  for(var i=0;i<=row-1;i++){
  var y=x.insertCell(i)
  var f=document.getElementById("add"+i).value;
  y.innerHTML=f;
  }
   times=times+1;
  var div3=document.getElementById("div3");
  alltable[dangqianbiaoge]=div3.innerHTML;
}

function deleterow(){
  var mytable=document.getElementById('myTable'+dangqianbiaoge);
  for(var i=0,rows=mytable.rows.length; i<rows; i++){
            var a=0;
        for(var j=0,cells=mytable.rows[i].cells.length; j<cells; j++){
            var aa=document.getElementById("delete"+j).value;
            if(mytable.rows[i].cells[j].innerHTML==aa){
                a=a+1;
              }
          }
            if(a==cells){
               document.getElementById("myTable"+dangqianbiaoge).deleteRow(i);
             }
       }
   times=times-1;
    var div3=document.getElementById("div3");
  alltable[dangqianbiaoge]=div3.innerHTML;
}

function deletetable(){

   var div3=document.getElementById("div3");
var obj=document.getElementById("select2"); 
var index=obj.selectedIndex; 
if(index>1){
obj.options.remove(index); 
document.getElementById('select2').value=index-2;
biaoge=biaoge-1;
dangqianbiaoge=index-2;
alltable.splice(index-1,1);
div3.innerHTML=alltable[dangqianbiaoge];
}
if(index==1){
obj.options.remove(index);
document.getElementById('select2').value=999;
biaoge=biaoge-1;
dangqianbiaoge=0;
alltable.splice(0,1);
div3.innerHTML="";
}








}
</script>



<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script language=javascript>
var int=self.setInterval("clock()",1)
function clock()
  {
  $(document).ready(function(){
             (test());
              function test(){
                  	$("#myTable"+dangqianbiaoge).find("tr").css("background-color", "white");
		$("#myTable"+dangqianbiaoge).find("tr:odd").css("background-color", "lightgrey");

                  }
	});
  }
</script>







</head>




<body>
<div style="margin: 0 auto; text-align: center">
 <select style="margin-left: auto; margin-right: auto;" onchange="show(this.value)">
  <option value="1">SELECT ONE</option>
  <option value="2">CREATE TABLE</option>
  <option value="3">ADD ROW</option>
  <option value="4">DELETE ROW</option>
  <option value="5">DELETE TABLE</option>
</select>
    <div id="div1">
 </div>
            <div id="div2">
     </div>
<select style="margin-left: auto; margin-right: auto;"id="select2" onchange="nowtable(this.value)">
  <option value="999">SELECT (default: last created)</option>
</select>
    

         <div id="div3">
     </div>














</div>


</body>
</html>